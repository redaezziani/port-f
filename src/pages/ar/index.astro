---
import Layout from "../../layouts/Layout.astro";
import Timeline from "../../components/Timeline.astro";
import ProjectGrid from "../../components/ProjectGrid.astro";
import HeaderMenu from "../../components/HeaderMenu.astro";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const careerEvents = [
  {
    date: "2022",
    title: t('career.degree.title'),
    description: t('career.degree.description'),
    iconType: "academic",
  },
  {
    date: "2024",
    title: t('career.certification.title'),
    description: t('career.certification.description'),
    iconType: "document",
  },
  {
    date: "2025 - Present",
    title: t('career.job.title'),
    description: t('career.job.description'),
    iconType: "computer",
  },
];

const projects = [
  {
    title: t('projects.portfolio.title'),
    description: t('projects.portfolio.description'),
    image: "/portfolio.webp",
    url: "https://reda-ezziani.fr",
  },
  {
    title: t('projects.taskManager.title'),
    description: t('projects.taskManager.description'),
    image: "/task-manager.webp",
    url: "https://task-manager.example.com",
  },
  {
    title: t('projects.ecommerce.title'),
    description: t('projects.ecommerce.description'),
    image: "/ecommerce.webp",
    url: "https://ecommerce.example.com",
  },
];
---

<Layout title="Reda Ezziani - Portfolio" lang={lang} dir="rtl">
  <main class="flex-1 p-4 pt-14 mx-auto max-w-7xl min-h-screen" dir="rtl">
    <div class="h-32 md:h-44 bg-gradient-to-b from-primary-100 dark:from-neutral-800 to-transparent rounded-xl mb-10 mt-5 flex items-center justify-center">
      <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6">
        <div class="flex flex-col text-center md:text-left gap-1">
          <h1 class="text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary-500 to-secondary-500">
            Reda Ezziani
          </h1>
          <p class="text-xl md:text-2xl font-medium text-neutral-700 dark:text-neutral-200">
            {t('header.jobTitle')}
          </p>
          <p class="text-sm md:text-base text-neutral-500 dark:text-neutral-400">
            {t('header.basedIn')} {t('header.country')}
          </p>
        </div>
      </div>
    </div>

    <section class="mb-12">
      <h2 class="text-3xl font-bold text-center mb-6">{t('whyMe.title')}</h2>
      <div class="prose dark:prose-invert mx-auto">
        <p>{t('whyMe.paragraph1')}</p>
        <p>{t('whyMe.paragraph2')}</p>
        <p>{t('whyMe.paragraph3')}</p>
      </div>
    </section>

    <section class="mb-12">
      <div class="text-center mb-10">
        <h2 class="text-3xl font-bold">{t('career.title')}</h2>
        <p class="text-neutral-600 dark:text-neutral-400 mt-2">
          {t('career.subtitle')}
        </p>
      </div>
      <Timeline events={careerEvents} />
    </section>

    <section class="mb-12">
      <div class="text-center mb-10">
        <h2 class="text-3xl font-bold">{t('projects.title')}</h2>
        <p class="text-neutral-600 dark:text-neutral-400 mt-2">
          {t('projects.subtitle')}
        </p>
      </div>
      <ProjectGrid projects={projects} />
    </section>
  </main>
  <HeaderMenu client:load />
</Layout>
